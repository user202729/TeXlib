%! TEX program = lualatex
\documentclass{article}

\usepackage{pdftexcmds}

\ExplSyntaxOn
\makeatletter
\cs_new_protected:Npn \bench#1. { \wlog{::::mark~#1:~\the\pdf@elapsedtime} }
\makeatother
\ExplSyntaxOff

\makeatletter
\AddToHook{package/before}{\wlog{::::start loading \@currname : \the\pdf@elapsedtime}}
\AddToHook{package/after}{\wlog{::::done loading \@currname : \the\pdf@elapsedtime}}

\usepackage{l3benchmark}

\ExplSyntaxOn
\benchmark_tic:
\ExplSyntaxOff

\usepackage[
	mode=unnamed_pipe, % faster
	scriptpath=/home/user202729/TeX/pythonimmediate_script_textopy.py
]{pythonimmediate}
%\usepackage[mode=multiprocessing_network]{pythonimmediate}  % slower


\ExplSyntaxOn
\message{======== loading the package takes ========}
\benchmark_toc:
\ExplSyntaxOff

\begin{document}
123
\end{document}
